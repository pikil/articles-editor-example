<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    %sveltekit.head%
    <script>
      (() => {
        let listeningForDarkMode = false;
        let status = localStorage.getItem('isDark');

        /**
         * @param {MediaQueryListEvent} evt
         */
        const updateDarkMode = ({ matches }) => {
          if (status === '1' || status === '0')
            return

          document.documentElement.dataset.mode = (matches) ? 'dark' : 'light';
        }

        switch (status) {
          case '1': // Manually set to Dark mode
            document.documentElement.dataset.mode = 'dark'
            break
          case '0': // Manually set to Light mode
            document.documentElement.dataset.mode = 'light'
            break
          default: // All other values - auto
            if (!listeningForDarkMode) {
              window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', updateDarkMode)
              listeningForDarkMode = true
            }

            document.documentElement.dataset.mode = (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) ? 'dark' : 'light'
        }
      })();
    </script>
  </head>
  <body data-sveltekit-preload-data="hover" class="bg-surface text-on-surface">
    <div class="contents">%sveltekit.body%</div>
  </body>
</html>
